paths:
  /api/movimentacao/entrada:
    post:
      summary: Registrar entrada de estoque (protegido)
      tags:
        - Movimentação
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                estoqueId:
                  type: integer
                  description: ID do item de estoque
                quantidade:
                  type: integer
                  description: Quantidade a adicionar
                motivo:
                  type: string
                  description: Motivo da entrada (COMPRA, AJUSTE, etc.)
                observacao:
                  type: string
                  description: Observação adicional (opcional)
              required:
                - estoqueId
                - quantidade
                - motivo
      responses:
        201:
          description: Entrada registrada com sucesso
        400:
          description: Dados inválidos
        401:
          description: Não autorizado
        404:
          description: Item de estoque não encontrado
        500:
          description: Erro interno no servidor

  /api/movimentacao/saida:
    post:
      summary: Registrar saída de estoque (protegido)
      tags:
        - Movimentação
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                estoqueId:
                  type: integer
                  description: ID do item de estoque
                quantidade:
                  type: integer
                  description: Quantidade a remover
                motivo:
                  type: string
                  description: Motivo da saída (VENDA, PERDA, etc.)
                observacao:
                  type: string
                  description: Observação adicional (opcional)
              required:
                - estoqueId
                - quantidade
                - motivo
      responses:
        201:
          description: Saída registrada com sucesso
        400:
          description: Dados inválidos ou estoque insuficiente
        401:
          description: Não autorizado
        404:
          description: Item de estoque não encontrado
        500:
          description: Erro interno no servidor

  /api/movimentacao:
    get:
      summary: Listar movimentações de estoque (protegido)
      tags:
        - Movimentação
      security:
        - bearerAuth: []
      parameters:
        - name: estoqueId
          in: query
          schema:
            type: integer
          description: Filtrar por ID do item de estoque
        - name: tipo
          in: query
          schema:
            type: string
            enum: [ENTRADA, SAIDA]
          description: Filtrar por tipo de movimentação
        - name: dataInicio
          in: query
          schema:
            type: string
            format: date
          description: Data de início para filtrar
        - name: dataFim
          in: query
          schema:
            type: string
            format: date
          description: Data de fim para filtrar
      responses:
        200:
          description: Lista de movimentações retornada com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  movimentacoes:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: integer
                          example: 1
                        estoqueId:
                          type: integer
                          example: 1
                        tipo:
                          type: string
                          example: "ENTRADA"
                        quantidade:
                          type: integer
                          example: 50
                        motivo:
                          type: string
                          example: "COMPRA"
                        observacao:
                          type: string
                          example: "Compra de fornecedor ABC"
                        responsavelId:
                          type: integer
                          example: 1
                        dataMovimentacao:
                          type: string
                          format: date-time
                          example: "2024-01-15T10:30:00.000Z"
                        estoque:
                          type: object
                          properties:
                            id:
                              type: integer
                            produto:
                              type: string
                        responsavel:
                          type: object
                          properties:
                            id:
                              type: integer
                            matricula:
                              type: string
              example:
                success: true
                movimentacoes:
                  - id: 1
                    estoqueId: 1
                    tipo: "ENTRADA"
                    quantidade: 50
                    motivo: "COMPRA"
                    observacao: "Compra de fornecedor ABC"
                    responsavelId: 1
                    dataMovimentacao: "2024-01-15T10:30:00.000Z"
                    estoque:
                      id: 1
                      produto: "Cimento"
                    responsavel:
                      id: 1
                      matricula: "12345"
        401:
          description: Não autorizado
        500:
          description: Erro interno no servidor

  /api/movimentacao/{id}:
    get:
      summary: Buscar movimentação específica (protegido)
      tags:
        - Movimentação
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
          description: ID da movimentação
      responses:
        200:
          description: Movimentação encontrada com sucesso
        401:
          description: Não autorizado
        404:
          description: Movimentação não encontrada
        500:
          description: Erro interno no servidor

  /api/movimentacao/relatorio/estoque:
    get:
      summary: Relatório completo de estoque (protegido)
      tags:
        - Movimentação
      security:
        - bearerAuth: []
      responses:
        200:
          description: Relatório gerado com sucesso
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  relatorio:
                    type: object
                    properties:
                      totalItens:
                        type: integer
                        example: 10
                      itensComEstoque:
                        type: integer
                        example: 8
                      itensSemEstoque:
                        type: integer
                        example: 2
                      estoque:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: integer
                            produto:
                              type: string
                            quantidade:
                              type: integer
                            unidade:
                              type: string
                            movimentacoes:
                              type: array
                              items:
                                type: object
              example:
                success: true
                relatorio:
                  totalItens: 10
                  itensComEstoque: 8
                  itensSemEstoque: 2
                  estoque:
                    - id: 1
                      produto: "Cimento"
                      quantidade: 100
                      unidade: "sacos"
                      movimentacoes: []
        401:
          description: Não autorizado
        500:
          description: Erro interno no servidor 